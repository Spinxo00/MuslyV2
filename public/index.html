<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  
  <!-- iOS PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Demus">
  <meta name="theme-color" content="#000000">
  
  <title>Demus - Music Player</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.webmanifest">
  
  <!-- iOS Icons -->
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><rect width='512' height='512' rx='100' fill='%23000'/><circle cx='256' cy='256' r='150' fill='none' stroke='%23fff' stroke-width='20'/><path d='M256 156 v200 l100-50' fill='%23fff'/></svg>">
  
  <!-- Preconnect to API hosts -->
  <link rel="preconnect" href="https://api.audius.co">
  <link rel="preconnect" href="https://www.youtube.com">
  
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- Main App Container -->
  <div id="app">
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">Demus</h1>
        <button class="settings-btn" aria-label="Settings">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6m4.22-13.22l-4.24 4.24m0 3.94l4.24 4.24M20 12h-6m-6 0H2m16.22 4.22l-4.24-4.24m0-3.94l-4.24-4.24"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Provider Selector -->
    <div class="provider-selector">
      <div class="segmented-control">
        <button class="segment active" data-provider="audius">Audius</button>
        <button class="segment" data-provider="youtube">YouTube</button>
        <button class="segment" data-provider="soundcloud">SoundCloud</button>
      </div>
    </div>

    <!-- Search/Input Section -->
    <div class="search-section">
      <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="Search tracks on Audius...">
        <button id="searchBtn" class="search-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section">
      <div id="results" class="results-grid"></div>
    </div>

    <!-- Queue Section -->
    <div class="queue-section hidden">
      <div class="queue-header">
        <h2>Queue</h2>
        <button class="clear-queue-btn">Clear</button>
      </div>
      <div id="queueList" class="queue-list"></div>
    </div>

    <!-- Mini Player -->
    <div id="miniPlayer" class="mini-player hidden">
      <div class="mini-player-content">
        <img class="mini-artwork" src="" alt="">
        <div class="mini-info">
          <div class="mini-title">—</div>
          <div class="mini-artist">—</div>
        </div>
        <button class="mini-play-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
        </button>
      </div>
      <div class="mini-progress"></div>
    </div>

    <!-- Full Player (Modal) -->
    <div id="fullPlayer" class="full-player hidden">
      <div class="player-backdrop"></div>
      <div class="player-sheet">
        <div class="player-handle"></div>
        <button class="player-close">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </button>
        
        <div class="player-artwork-container">
          <img class="player-artwork" src="" alt="">
        </div>
        
        <div class="player-info">
          <div class="player-title">—</div>
          <div class="player-artist">—</div>
        </div>
        
        <div class="player-progress">
          <input type="range" class="progress-slider" min="0" max="100" value="0">
          <div class="progress-times">
            <span class="time-current">0:00</span>
            <span class="time-total">0:00</span>
          </div>
        </div>
        
        <div class="player-controls">
          <button class="control-btn" id="prevBtn">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
            </svg>
          </button>
          <button class="control-btn play-pause-btn" id="playPauseBtn">
            <svg width="44" height="44" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z"/>
            </svg>
          </button>
          <button class="control-btn" id="nextBtn">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
            </svg>
          </button>
        </div>
        
        <div class="player-actions">
          <button class="action-btn" id="queueBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="3" y1="12" x2="21" y2="12"/>
              <line x1="3" y1="6" x2="21" y2="6"/>
              <line x1="3" y1="18" x2="21" y2="18"/>
            </svg>
          </button>
          <button class="action-btn" id="shareBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
              <polyline points="16 6 12 2 8 6"/>
              <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- YouTube Player Container -->
    <div id="youtubePlayer" class="hidden"></div>
  </div>

  <!-- Loading Indicator -->
  <div id="loadingIndicator" class="loading-indicator hidden">
    <div class="spinner"></div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="/app.js" type="module"></script>
</body>
</html>
